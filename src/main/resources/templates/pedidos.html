<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
>
  <head>
    <meta charset="utf-8" />
    <title>Crisalis</title>
    <link rel="stylesheet" type="text/css" href="/css/estilos.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@200;300;400&display=swap"
    />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500;600&family=Work+Sans:wght@200;300;400&display=swap" rel="stylesheet">
  </head>
  <body>
    <nav>
      <!-- 
        <div class="logo">
            <div class="im-lg"></div>
        </div> -->
      <div class="direcciones">
        <ul>
          <li sec:authorize="isAuthenticated()">
            <a class="hvr-underline-from-center" th:href="@{/}">Home</a>
          </li>
          <li sec:authorize="isAuthenticated()">
            <a class="hvr-underline-from-center" th:href="@{/pedidos}"
              >Pedidos</a
            >
          </li>
          <li sec:authorize="isAuthenticated()">
            <a class="hvr-underline-from-center" th:href="@{/clientes}"
              >Clientes</a
            >
          </li>
          <li sec:authorize="isAuthenticated()">
            <a class="hvr-underline-from-center" th:href="@{/productos}"
              >Productos</a
            >
          </li>
          <li sec:authorize="isAuthenticated()">
            <a class="hvr-underline-from-center" th:href="@{/servicios}"
              >Servicios</a
            >
          </li>
          <li sec:authorize="isAuthenticated()">
            <a class="hvr-underline-from-center" th:href="@{/impuestos}"
              >Impuestos</a
            >
          </li>
          <li sec:authorize="isAuthenticated()">
            <a class="hvr-underline-from-center" th:href="@{/logout}"
              >Cerrar sesi√≥n</a
            >
          </li>
        </ul>
      </div>
    </nav>
    <h1>Pedidos</h1>
    <header>
      <div class="contenedor-col">
        

        <form class="filtros-form" th:action="@{/pedidos}">
          <input
            type="text"
            name="palabra"
            id="palabra"
            th:value="${palabra}"
            placeholder="Cliente Apellido"
          />

          <input
            type="text"
            name="palabraProducto"
            id="palabraProducto"
            th:value="${palabraProducto}"
            placeholder="Producto Descripcion"
          />

          <input
            type="text"
            name="palabraServicio"
            id="palabraServicio"
            th:value="${palabraServicio}"
            placeholder="Servicio Descripcion"
          />

          <button type="submit" class="btn-primario" value="Buscar">
            Buscar
          </button>
          <button
            type="button"
            class="btn-secundario"
            value="Limpiar"
            onclick="limpiarCampos()"
          >
            Limpiar
          </button>
        </form>

        <div class="contenedor-col">
          <div class="funcionalidades">
            <button class="btn-primario">
              <a th:href="@{/carrito}">Nuevo</a>
            </button>
          </div>

          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>Descuento</th>
                <th>subtotal</th>
                <th>Total</th>
                <th>Acciones</th>
              </tr>
            </thead>

            <tbody>
              <tr th:each="pedido : ${pedidos}">
                <td th:text="${pedido.idPedido}"></td>
                <td th:text="${pedido.descuento}"></td>
                <td th:text="${pedido.subtotal}"></td>
                <td th:text="${pedido.total}"></td>

                <td>
                  <button class="btn-secundario">
                    <a
                      th:href="@{pedidos/{id} (id=${pedido.idPedido})}"
                      th:object="${pedido}"
                    >
                      Eliminar</a
                    >
                  </button>
                  <button class="btn-secundario">
                    <a
                      th:href="@{pedidos/editar_pedido/{id}
                               (id=${pedido.idPedido})}"
                      th:object="${pedido}"
                    >
                      Editar</a
                    >
                  </button>
                  <button class="btn-secundario">
                    <a
                      th:href="@{pedidos/ver/{id}
                               (id=${pedido.idPedido})}"
                      th:object="${pedido}"
                    >
                      Ver</a
                    >
                  </button>
                  <button class="btn-secundario">
                    <a
                      th:href="@{pedidos/impuestos_extras/{id}
                               (id=${pedido.idPedido})}"
                      th:object="${pedido}"
                      >Impuestos</a
                    >
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <script type="text/javascript">
        function limpiarCampos() {
          window.location = "/pedidos";
        }
      </script>
    </header>
  </body>
</html>
